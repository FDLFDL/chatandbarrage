<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="http://cdn.css.net/libs/vue/1.0.8/vue.js"></script>

    <script src="//cdn.bootcss.com/socket.io/1.3.7/socket.io.min.js"></script>

    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</head>

<style>
    /* 必需 */
    .expand-transition {
        transition: all .3s ease;
        padding: 10px;
        overflow: hidden;
    }

    /* .expand-enter 定义进入的开始状态 */
    /* .expand-leave 定义离开的结束状态 */
    .expand-enter, .expand-leave {
        height: 0;
        padding: 0 30px;
        opacity: 0;
    }

</style>
<body>
<div class="container">
    <ul id="message">
        <li v-for="item in items" transition="expand">
            {{ item.name }}:{{ item.message }}
            <button class="btn btn-default" v-on:click="remove($index)">X</button>
        </li>
    </ul>
    <form>
        <div class="form-group">
            <input name="name" class="form-control" v-model="name">
            <input name="message" class="form-control"  v-model="message">

            <button class="btn btn-primary" v-on:click="send">Greet</button>
        </div>
    </form>

</div>


<script>


    var socket=io();

    var ex1=new Vue({
        el: 'body',

        data:{
            items:[
                {name:'Say',message:'Hello~'},
            ]
        },


        ready:function(){

            socket.on('chat.message',function(data){

                this.items.push(data);

            }.bind(this));

        },

        methods:{
            send:function(e){
                data={name:this.name,message:this.message}
                socket.emit('chat.message',data);
                this.message='';
                e.preventDefault();
            },
            remove:function(index){
                this.items.splice(index,1);
            }
        }
    })


    
</script>
</body>
</html>